# SonarCloud configuration for rezrov-zmachine
# Docs: https://docs.sonarcloud.io/advanced-setup/ci-based-analysis/sonarscanner-cli/

sonar.projectKey=Random-Lunacy_rezrov-zmachine
sonar.organization=random-lunacy

sonar.projectName=rezrov-zmachine
sonar.projectVersion=1.0.0

# ── Source layout ─────────────────────────────────────────────────────────────

sonar.sources=src
sonar.tests=tests
sonar.sourceEncoding=UTF-8

# ── TypeScript ────────────────────────────────────────────────────────────────

sonar.typescript.tsconfigPath=tsconfig.json

# ── Exclusions ────────────────────────────────────────────────────────────────

# Exclude generated build output, third-party code, and example/tool scripts
# from main source analysis. They are not part of the published library.
sonar.exclusions=\
  **/node_modules/**,\
  **/dist/**,\
  **/coverage/**,\
  **/examples/**,\
  **/tools/**

# Only scan files that live under tests/ as test sources
sonar.test.inclusions=tests/**/*.test.ts

# ── Coverage ──────────────────────────────────────────────────────────────────
#
# NOTE: vitest.config.ts must include 'lcov' in coverage.reporter to generate
# coverage/lcov.info.  Add it alongside the existing reporters:
#
#   reporter: ['text', 'json', 'html', 'lcov'],
#
sonar.javascript.lcov.reportPaths=coverage/lcov.info

# Exclude non-library code and generated barrel/index files from coverage
sonar.coverage.exclusions=\
  **/tests/**,\
  **/examples/**,\
  **/tools/**,\
  **/dist/**,\
  src/index.ts

# ── Duplication ───────────────────────────────────────────────────────────────

sonar.cpd.exclusions=\
  **/tests/**,\
  **/examples/**,\
  **/tools/**
